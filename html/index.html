<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="js/sha.js"></script>
        <script type="text/javascript">
            function getPassword() {
                var passphrase = document.getElementById("passphrase").value
                var confirm = document.getElementById("confirm").value
                var nickname = document.getElementById("nickname").value
                
                if (passphrase != confirm) {
                    document.write("Passphrase didn't match.")
                }
            
                var input = passphrase + nickname;
                var hasher = new jsSHA(input, "ASCII");
                for (var i = 0; i < 999; i++) {
                    hasher = new jsSHA(hasher.getHash("SHA-256", "HEX"), "HEX");
                }
                var output = hasher.getHash("SHA-256", "B64").slice(0, 12);
                output = output.replace("+", "-");
                output = output.replace("/", "_");
                document.getElementById("password").value = output;
            }
        </script>
    </head>
    <body>
        <table>
            <tr>
                <td>Passphrase</td> 
                <td><input type="password" id="passphrase"></td>
            </tr>
            <tr>
                <td>Confirm</td> 
                <td><input type="password" id="confirm"></td>
            </tr>
            <tr>
                <td>Nickname</td>
                <td><input type="text" id="nickname"></td>
            </tr>
            <tr>
                <td>Password</td> 
                <td><input type="text" id="password"></td>
            </tr>
            <tr>
                <td><input type="button" value="Generate Password" onclick="getPassword()"></td>
            </tr>
        </table>
    </body>
</html>
